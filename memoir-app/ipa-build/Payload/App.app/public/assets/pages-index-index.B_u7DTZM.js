function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/components-LazyImage.DWWZVpe-.js","assets/index-DQU_JAH0.js","assets/index-DBRlL7wL.css","assets/imageMapping.mDgfjL7P.js","assets/_plugin-vue_export-helper.BCo6x5W8.js","assets/LazyImage-4nOqDq01.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as e,c as t,w as a,s,n as o,g as l,r,i as c,o as i,a as d,b as n,d as p,e as g,f as m,h as u,j as h,S as f,k as _,F as C,l as y,m as b,t as I}from"./index-DQU_JAH0.js";import{a as k}from"./apiConfig.BpiTqs15.js";import{i as x}from"./imagePreloader.BIvFExa3.js";import{g as v}from"./imageMapping.mDgfjL7P.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const P=w({components:{LazyImage:()=>e(()=>import("./components-LazyImage.DWWZVpe-.js"),__vite__mapDeps([0,1,2,3,4,5]))},data:()=>({progressPercent:0,totalChapters:10,completedChapters:[],allChapters:[{id:"background",title:"å®¶åº­èƒŒæ™¯",description:"è®°å½•æ‚¨çš„å‡ºç”Ÿåœ°ã€å®¶åº­ç¯å¢ƒå’Œç¥–è¾ˆæ•…äº‹",backgroundImage:"/src/images/story1.png",completed:!1},{id:"childhood",title:"ç«¥å¹´æ—¶å…‰",description:"åˆ†äº«ç«¥å¹´çš„ç¾å¥½å›å¿†å’Œæˆé•¿ç»å†",backgroundImage:"/src/images/story2.png",completed:!1},{id:"education",title:"æ±‚å­¦ç”Ÿæ¶¯",description:"è®°å½•å­¦ä¹ å†ç¨‹å’Œæ ¡å›­ç”Ÿæ´»",backgroundImage:"/src/images/story3.png",completed:!1},{id:"career",title:"èŒä¸šå‘å±•",description:"åˆ†äº«å·¥ä½œç»å†å’ŒèŒä¸šæˆå°±",backgroundImage:"/src/images/story4.png",completed:!1},{id:"love",title:"çˆ±æƒ…å©šå§»",description:"è®°å½•çˆ±æƒ…æ•…äº‹å’Œå©šå§»ç”Ÿæ´»",backgroundImage:"/src/images/story5.png",completed:!1},{id:"family",title:"ä¸ºäººçˆ¶æ¯",description:"åˆ†äº«è‚²å„¿ç»å†å’Œå®¶åº­ç”Ÿæ´»",backgroundImage:"/src/images/story6.png",completed:!1},{id:"travel",title:"æ—…è¡Œè§é—»",description:"è®°å½•æ—…è¡Œç»å†å’Œè§é—»æ„Ÿæ‚Ÿ",backgroundImage:"/src/images/story7.png",completed:!1},{id:"relationships",title:"äººç¼˜é™…é‡",description:"è®°å½•é‡è¦çš„äººé™…å…³ç³»å’Œäººç”Ÿé™…é‡",backgroundImage:"/src/images/story8.png",completed:!1},{id:"laterlife",title:"æ™šå¹´ç”Ÿæ´»",description:"åˆ†äº«é€€ä¼‘åçš„ç”Ÿæ´»å’Œæ™šå¹´æ„Ÿæ‚Ÿ",backgroundImage:"/src/images/story9.png",completed:!1},{id:"wisdom",title:"äººç”Ÿæ„Ÿæ‚Ÿ",description:"åˆ†äº«äººç”Ÿæ™ºæ…§å’Œç”Ÿæ´»å“²ç†",backgroundImage:"/src/images/story10.png",completed:!1}]}),onLoad(){this.loadChapterData(),this.loadUserChapters(),this.preloadCriticalImages()},onShow(){this.loadChapterData(),this.loadUserChapters()},methods:{getOptimalImagePath:v,preloadCriticalImages(){x.preloadCritical(["/src/images/memoirbook.png","/src/images/winter.png","/src/images/lion.png"]).then(()=>{console.log("å…³é”®å›¾ç‰‡é¢„åŠ è½½å®Œæˆ")}).catch(e=>{console.warn("å…³é”®å›¾ç‰‡é¢„åŠ è½½å¤±è´¥:",e)})},loadChapterData(){try{const e=l("user"),t=null==e?void 0:e.id;if(!t)return this.allChapters.forEach(e=>{e.completed=!1}),void(this.progressPercent=0);const a=l(`chapter_status_${t}`);if(a){const e=JSON.parse(a);let t=0;this.allChapters.forEach(a=>{e[a.id]&&e[a.id].completed?(a.completed=!0,t++):a.completed=!1}),this.progressPercent=t/this.totalChapters*100}else this.allChapters.forEach(e=>{e.completed=!1}),this.progressPercent=0}catch(e){console.log("åŠ è½½ç« èŠ‚æ•°æ®å¤±è´¥:",e),this.allChapters.forEach(e=>{e.completed=!1}),this.progressPercent=0}},async loadUserChapters(){try{const e=l("token");if(!e)return void console.log("ç”¨æˆ·æœªç™»å½•ï¼Œè·³è¿‡åŠ è½½ç”¨æˆ·ç« èŠ‚");const t=await r({url:k("/chapters"),method:"GET",header:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(200===t.statusCode&&t.data.success){const e=(t.data.data||{}).chapters||[];console.log("ğŸ“š è·å–åˆ°ç”¨æˆ·ç« èŠ‚:",e);const a=e.filter(e=>e.chapterId&&!e.chapterId.startsWith("diary_"));console.log("ğŸ“– è¿‡æ»¤å‡ºçš„å›ºå®šç« èŠ‚:",a),a.forEach(e=>{const t=this.allChapters.find(t=>t.id===e.chapterId);t&&(t.completed="completed"===e.status)}),console.log("âœ… ç”¨æˆ·ç« èŠ‚çŠ¶æ€æ›´æ–°å®Œæˆ")}else console.log("âŒ è·å–ç”¨æˆ·ç« èŠ‚å¤±è´¥:",t.data)}catch(e){console.error("âŒ åŠ è½½ç”¨æˆ·ç« èŠ‚å‡ºé”™:",e)}},getChapterNumber:e=>["ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹","å"][e]||e+1,goToChapter(e){e.isDiary?o({url:`/pages/diary/edit?chapterId=${e.id}&title=${encodeURIComponent(e.title)}&mode=view`}):o({url:`/pages/recording/index?chapterId=${e.id}&title=${encodeURIComponent(e.title)}`})},getPreviewText:e=>e?e.length>50?e.substring(0,50)+"...":e:"æš‚æ— å†…å®¹",viewChapter(e){o({url:`/pages/recording/index?chapterId=${e.id}&title=${encodeURIComponent(e.title)}`})},goToMemoir(){s({url:"/pages/memoir/index"})},goToDiary(){console.log("ç‚¹å‡»éšè®°å¡ç‰‡ï¼Œå‡†å¤‡è·³è½¬åˆ°éšè®°é¡µé¢"),s({url:"/pages/diary/index",success:function(){console.log("æˆåŠŸè·³è½¬åˆ°éšè®°é¡µé¢")},fail:function(e){console.error("è·³è½¬åˆ°éšè®°é¡µé¢å¤±è´¥:",e),o({url:"/pages/diary/index"})}})},goToChapters(){console.log("ç‚¹å‡»å¼€å§‹å½•åˆ¶æŒ‰é’®ï¼Œå‡†å¤‡è·³è½¬åˆ°å²æœˆé•œåƒ"),s({url:"/pages/memoir/index"})}}},[["render",function(e,s,o,l,r,k){const x=n,v=c,w=g,P=u,T=f;return i(),t(v,{class:"container"},{default:a(()=>[d(v,{class:"memoir-card",onClick:k.goToMemoir},{default:a(()=>[d(v,{class:"memoir-card-left"},{default:a(()=>[d(x,{src:k.getOptimalImagePath("/src/images/memoirbook.png"),class:"book-cover",mode:"aspectFit"},null,8,["src"])]),_:1}),d(v,{class:"memoir-card-right"},{default:a(()=>[d(v,{class:"memoir-content"},{default:a(()=>[d(v,{class:"memoir-title"},{default:a(()=>[p("å›å¿†å½•")]),_:1}),d(v,{class:"memoir-subtitle"},{default:a(()=>[p("è®°å½•æ‚¨çš„äººç”Ÿæ•…äº‹")]),_:1}),d(v,{class:"memoir-progress"},{default:a(()=>[d(w,{class:"progress-text"},{default:a(()=>[p("0/36")]),_:1}),d(w,{class:"progress-label"},{default:a(()=>[p("å·²å½•åˆ¶")]),_:1})]),_:1}),d(v,{class:"progress-bar"},{default:a(()=>[d(v,{class:"progress-fill",style:m({width:r.progressPercent+"%"})},null,8,["style"])]),_:1})]),_:1}),d(P,{class:"start-btn",onClick:k.goToChapters},{default:a(()=>[p("å¼€å§‹å½•åˆ¶")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["onClick"]),d(v,{class:"diary-card",onClick:k.goToDiary},{default:a(()=>[d(x,{src:k.getOptimalImagePath("/src/images/winter.png"),class:"diary-bg",mode:"aspectFill"},null,8,["src"]),d(v,{class:"diary-overlay"},{default:a(()=>[d(v,{class:"diary-title"},{default:a(()=>[p("éšè®°")]),_:1}),d(v,{class:"diary-subtitle"},{default:a(()=>[p("è®°å½•ç…§ç‰‡é‡Œçš„æ•…äº‹ï¼Œéšæ‰‹å†™ä¸‹ç”Ÿæ´»ç‚¹æ»´"),h("br"),p("è½»æ¾å¯¼å…¥å›å¿†å½•")]),_:1})]),_:1})]),_:1},8,["onClick"]),d(v,{class:"section-preview"},{default:a(()=>[d(v,{class:"section-title"},{default:a(()=>[p("ç« èŠ‚é¢„è§ˆ")]),_:1}),d(T,{class:"chapters-scroll","scroll-x":"true","show-scrollbar":"false","enable-flex":"true"},{default:a(()=>[d(v,{class:"chapters-container"},{default:a(()=>[(i(!0),_(C,null,y(r.allChapters,(e,s)=>(i(),t(v,{key:e.id,class:b(["chapter-preview-card",{completed:e.completed,first:0===s,last:s===r.allChapters.length-1}]),onClick:t=>k.goToChapter(e)},{default:a(()=>[d(v,{class:"card-bg"},{default:a(()=>[d(x,{src:k.getOptimalImagePath(e.backgroundImage),class:"bg-image",mode:"aspectFill"},null,8,["src"]),d(v,{class:"bg-overlay"})]),_:2},1024),d(v,{class:"card-content"},{default:a(()=>[d(v,{class:"chapter-number"},{default:a(()=>[p("ç¬¬"+I(k.getChapterNumber(s))+"ç« ",1)]),_:2},1024),d(v,{class:"chapter-title"},{default:a(()=>[p(I(e.title),1)]),_:2},1024),d(v,{class:"chapter-subtitle"},{default:a(()=>[p(I(e.description),1)]),_:2},1024),e.completed?(i(),t(v,{key:0,class:"completion-status"},{default:a(()=>[d(v,{class:"status-icon"},{default:a(()=>[p("âœ“")]),_:1}),d(w,{class:"status-text"},{default:a(()=>[p("å·²å®Œæˆ")]),_:1})]),_:1})):(i(),t(v,{key:1,class:"completion-status not-started"},{default:a(()=>[d(v,{class:"status-icon"},{default:a(()=>[p("â—¯")]),_:1}),d(w,{class:"status-text"},{default:a(()=>[p("æœªå¼€å§‹")]),_:1})]),_:1}))]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),d(v,{class:"scroll-tip"},{default:a(()=>[d(w,{class:"tip-text"},{default:a(()=>[p("å·¦å³æ»‘åŠ¨æµè§ˆç« èŠ‚")]),_:1})]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-8aaa2b10"]]);export{P as default};
