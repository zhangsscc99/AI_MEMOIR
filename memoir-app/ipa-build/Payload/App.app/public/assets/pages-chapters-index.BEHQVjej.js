function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/components-LazyImage.DWWZVpe-.js","assets/index-DQU_JAH0.js","assets/index-DBRlL7wL.css","assets/imageMapping.mDgfjL7P.js","assets/_plugin-vue_export-helper.BCo6x5W8.js","assets/LazyImage-4nOqDq01.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as e,c as t,w as a,g as s,r as c,n as o,D as l,i as r,o as d,a as i,e as n,d as p,t as m,S as g,k as h,F as u,l as f,m as _,b,B as I}from"./index-DQU_JAH0.js";import{a as k}from"./apiConfig.BpiTqs15.js";import{i as C}from"./imagePreloader.BIvFExa3.js";import{g as y}from"./imageMapping.mDgfjL7P.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=v({components:{LazyImage:()=>e(()=>import("./components-LazyImage.DWWZVpe-.js"),__vite__mapDeps([0,1,2,3,4,5]))},data:()=>({chapters:[{id:"background",title:"å®¶åº­èƒŒæ™¯",description:"è®°å½•æ‚¨çš„å‡ºç”Ÿåœ°ã€å®¶åº­ç¯å¢ƒå’Œç¥–è¾ˆæ•…äº‹",backgroundImage:"/src/images/story1.png",completed:!1},{id:"childhood",title:"ç«¥å¹´æ—¶å…‰",description:"åˆ†äº«ç«¥å¹´çš„ç¾å¥½å›å¿†å’Œæˆé•¿ç»å†",backgroundImage:"/src/images/story2.png",completed:!1},{id:"education",title:"æ±‚å­¦ç”Ÿæ¶¯",description:"è®°å½•å­¦ä¹ å†ç¨‹å’Œæ ¡å›­ç”Ÿæ´»",backgroundImage:"/src/images/story3.png",completed:!1},{id:"career",title:"èŒä¸šå‘å±•",description:"åˆ†äº«å·¥ä½œç»å†å’ŒèŒä¸šæˆå°±",backgroundImage:"/src/images/story4.png",completed:!1},{id:"love",title:"çˆ±æƒ…å©šå§»",description:"è®°å½•çˆ±æƒ…æ•…äº‹å’Œå©šå§»ç”Ÿæ´»",backgroundImage:"/src/images/story5.png",completed:!1},{id:"family",title:"ä¸ºäººçˆ¶æ¯",description:"åˆ†äº«è‚²å„¿ç»å†å’Œå®¶åº­ç”Ÿæ´»",backgroundImage:"/src/images/story6.png",completed:!1},{id:"travel",title:"æ—…è¡Œè§é—»",description:"è®°å½•æ—…è¡Œç»å†å’Œè§é—»æ„Ÿæ‚Ÿ",backgroundImage:"/src/images/story7.png",completed:!1},{id:"relationships",title:"äººç¼˜é™…é‡",description:"è®°å½•é‡è¦çš„äººé™…å…³ç³»å’Œäººç”Ÿé™…é‡",backgroundImage:"/src/images/story8.png",completed:!1},{id:"laterlife",title:"æ™šå¹´ç”Ÿæ´»",description:"åˆ†äº«é€€ä¼‘åçš„ç”Ÿæ´»å’Œæ™šå¹´æ„Ÿæ‚Ÿ",backgroundImage:"/src/images/story9.png",completed:!1},{id:"wisdom",title:"äººç”Ÿæ„Ÿæ‚Ÿ",description:"åˆ†äº«äººç”Ÿæ™ºæ…§å’Œç”Ÿæ´»å“²ç†",backgroundImage:"/src/images/story10.png",completed:!1}]}),computed:{completedCount(){return this.chapters.filter(e=>e.completed).length},totalChapters(){return this.chapters.length}},onLoad(){this.loadChapterStatus(),this.preloadChapterImages(),this.loadUserChapters()},onShow(){this.loadUserChapters()},methods:{getOptimalImagePath:y,preloadChapterImages(){const e=this.chapters.map(e=>e.backgroundImage);C.preloadChapterImages(e).then(()=>{console.log("ç« èŠ‚å›¾ç‰‡é¢„åŠ è½½å®Œæˆ")}).catch(e=>{console.warn("ç« èŠ‚å›¾ç‰‡é¢„åŠ è½½å¤±è´¥:",e)})},goBack(){l()},selectChapter(e){e.isDiary?o({url:`/pages/diary/edit?chapterId=${e.id}&title=${encodeURIComponent(e.title)}&mode=edit`}):o({url:`/pages/recording/index?chapterId=${e.id}&title=${encodeURIComponent(e.title)}`})},getChapterNumber:e=>["ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹","å"][e]||e+1,loadChapterStatus(){try{const e=s("user"),t=null==e?void 0:e.id;if(!t)return void this.chapters.forEach(e=>{e.completed=!1});const a=s(`chapter_status_${t}`);if(a){const e=JSON.parse(a);this.chapters.forEach(t=>{e[t.id]&&(t.completed=e[t.id].completed||!1)})}}catch(e){console.log("åŠ è½½ç« èŠ‚çŠ¶æ€å¤±è´¥:",e)}},async loadUserChapters(){try{console.log("ğŸ”„ å¼€å§‹åŠ è½½ç”¨æˆ·ç« èŠ‚...");const e=s("token");if(!e)return void console.log("âŒ æœªç™»å½•ï¼Œè·³è¿‡åŠ è½½ç”¨æˆ·ç« èŠ‚");const t=await c({url:k("/chapters"),method:"GET",header:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(console.log("ğŸ“Š ç”¨æˆ·ç« èŠ‚å“åº”:",t),200===t.statusCode&&t.data.success){const e=(t.data.data||{}).chapters||[];console.log("ğŸ“š è·å–åˆ°ç”¨æˆ·ç« èŠ‚:",e);const a=e.filter(e=>e.chapterId&&!e.chapterId.startsWith("diary_"));console.log("ğŸ“– è¿‡æ»¤å‡ºçš„å›ºå®šç« èŠ‚:",a),a.forEach(e=>{const t=this.chapters.find(t=>t.id===e.chapterId);t&&(t.completed="completed"===e.status)}),console.log("âœ… ç”¨æˆ·ç« èŠ‚çŠ¶æ€æ›´æ–°å®Œæˆ")}else console.log("âŒ è·å–ç”¨æˆ·ç« èŠ‚å¤±è´¥:",t.data)}catch(e){console.error("âŒ åŠ è½½ç”¨æˆ·ç« èŠ‚å‡ºé”™:",e)}}}},[["render",function(e,s,c,o,l,k){const C=n,y=r,v=b,j=g;return d(),t(y,{class:"container"},{default:a(()=>[i(y,{class:"nav-header"},{default:a(()=>[i(y,{class:"back-btn",onClick:k.goBack},{default:a(()=>[i(C,{class:"back-icon"},{default:a(()=>[p("â†")]),_:1})]),_:1},8,["onClick"]),i(y,{class:"nav-title"},{default:a(()=>[p("äººç”Ÿç« èŠ‚")]),_:1})]),_:1}),i(y,{class:"content"},{default:a(()=>[i(y,{class:"stats-section"},{default:a(()=>[i(y,{class:"stats-card"},{default:a(()=>[i(y,{class:"stat-item"},{default:a(()=>[i(C,{class:"stat-number"},{default:a(()=>[p(m(k.completedCount),1)]),_:1}),i(C,{class:"stat-label"},{default:a(()=>[p("å·²å®Œæˆ")]),_:1})]),_:1}),i(y,{class:"stat-divider"}),i(y,{class:"stat-item"},{default:a(()=>[i(C,{class:"stat-number"},{default:a(()=>[p(m(k.totalChapters),1)]),_:1}),i(C,{class:"stat-label"},{default:a(()=>[p("æ€»ç« èŠ‚")]),_:1})]),_:1})]),_:1})]),_:1}),i(y,{class:"chapters-section"},{default:a(()=>[i(j,{class:"chapters-scroll","scroll-y":"true","show-scrollbar":"false","enable-flex":"true"},{default:a(()=>[i(y,{class:"chapters-container"},{default:a(()=>[(d(!0),h(u,null,f(l.chapters,(e,s)=>(d(),t(y,{key:e.id,class:_(["chapter-card",{completed:e.completed,first:0===s,last:s===l.chapters.length-1}]),onClick:t=>k.selectChapter(e)},{default:a(()=>[i(y,{class:"chapter-bg"},{default:a(()=>[i(v,{src:k.getOptimalImagePath(e.backgroundImage),class:"bg-image",mode:"aspectFill"},null,8,["src"]),i(y,{class:"bg-overlay"})]),_:2},1024),i(y,{class:"chapter-content"},{default:a(()=>[i(y,{class:"chapter-number"},{default:a(()=>[p("ç¬¬"+m(k.getChapterNumber(s))+"ç« ",1)]),_:2},1024),i(y,{class:"chapter-title"},{default:a(()=>[p(m(e.title),1)]),_:2},1024),i(y,{class:"chapter-desc"},{default:a(()=>[p(m(e.description),1)]),_:2},1024),e.completed?(d(),t(y,{key:0,class:"chapter-status"},{default:a(()=>[i(y,{class:"status-icon"},{default:a(()=>[p("âœ“")]),_:1})]),_:1})):I("",!0)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),i(y,{class:"tip-section"},{default:a(()=>[i(C,{class:"tip-text"},{default:a(()=>[p("ä¸Šä¸‹æ»‘åŠ¨æµè§ˆç« èŠ‚ï¼Œç‚¹å‡»å¼€å§‹å½•åˆ¶")]),_:1})]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-d0deb415"]]);export{j as default};
